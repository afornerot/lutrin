<!-- templates/user.html -->
<div id="user-mode-content" class="h-screen flex flex-col bg-gray-200">
    <!-- Zone de Statut/Chargement pour le mode utilisateur -->
    <div id="user-status-overlay"
        class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 hidden">
        <div id="user-status-message"
            class="p-6 bg-gray-800 bg-opacity-80 text-white rounded-xl shadow-lg font-medium flex flex-col items-center">
            <div class="w-10 h-10 border-4 border-dashed rounded-full loader-white mb-4"></div>
            <span id="user-status-text">Opération en cours...</span>
        </div>
        <!-- Zone Erreur pour le mode utilisateur -->
        <div id="user-error-message"
            class="p-6 bg-red-800 bg-opacity-80 text-white rounded-xl shadow-lg font-medium flex flex-col items-center hidden">
            <span id="user-error-text">Une erreur est survenue.</span>
        </div>
    </div>
    <!-- La vidéo prendra l'espace disponible -->
    <div class="flex-grow flex items-center justify-center bg-black overflow-hidden shadow-lg">
        <video id="user-video-stream" autoplay playsinline class="w-full h-full object-contain"></video>
    </div>
    <!-- Le bouton et le lecteur audio restent en bas -->
    <div class="flex-shrink-0">
        <div class="flex items-center">
            <button id="user-mode-action-button"
                class="capture-button flex-grow bg-blue-600 hover:bg-blue-700 text-white font-bold text-2xl py-3 px-4 transition duration-150 ease-in-out shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-blue-300 flex items-center justify-center disabled:opacity-50">
                <i class="fas fa-book-open mr-4"></i>
                Lire la page
            </button>
            <button id="user-mode-stop-button"
                class="hidden w-2/5 bg-red-600 hover:bg-red-700 text-white font-bold text-2xl py-3 px-6 transition duration-150 ease-in-out shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-red-300">
                <i class="fas fa-stop"></i>
            </button>
        </div>
        <audio id="user-audio-playback" controls class="w-full"></audio>
    </div>

    <button id="user-logout-button" class="absolute text-white text-sm" style="top: 10px; right:10px;">
        <i class="fas fa-sign-out-alt fa-2x"></i>
    </button>

    <button id="open-engine-settings-user-button" class="absolute text-white text-sm" style="top: 60px; right:10px;">
        <i class="fas fa-cogs fa-2x"></i>
    </button>

    <button id="switch-camera-button" class="absolute text-white text-sm" style="top: 110px; right:10px;">
        <i class="fas fa-sync-alt fa-2x"></i>
    </button>

    <!-- Sélecteur de Mode -->
    <div class="absolute" style="bottom: 130px; right:10px;">
        <label for="mode-toggle" class="flex items-center cursor-pointer">
            <span class="mr-2 text-sm font-medium text-white hidden md:block">
                <i class="fas fa-user fa-lg md:fa-2x"></i>
            </span>
            <div class="relative">
                <input type="checkbox" id="mode-toggle" class="sr-only peer">
                <div class="w-8 h-5 md:w-14 md:h-8 bg-gray-300 rounded-full peer-checked:bg-blue-500"></div>
                <div
                    class="absolute left-0.5 top-0.5 md:left-1 md:top-1 bg-white w-4 h-4 md:w-6 md:h-6 rounded-full transition-transform peer-checked:translate-x-5 md:peer-checked:translate-x-full">
                </div>
            </div>
            <span class="ml-2 text-sm font-medium text-white">
                <i class="fas fa-desktop fa-lg md:fa-2x"></i>
            </span>
        </label>
    </div>

</div>